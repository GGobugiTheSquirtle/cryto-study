<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>크립토 매매 훈련 퀴즈</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Space+Grotesk:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="app-shell">
      <aside class="sidebar card">
        <h1>실전 매매 워크북</h1>
        <p id="set-sub" class="sub">백테스트 기반 실전 퀴즈</p>
        <div class="set-picker">
          <label for="set-select">문항 세트</label>
          <select id="set-select">
            <option value="10">10문항</option>
            <option value="20">20문항</option>
            <option value="30">30문항</option>
          </select>
        </div>
        <div class="stats">
          <div>
            <span class="label">문항</span>
            <strong id="stat-count">-</strong>
          </div>
          <div>
            <span class="label">완료</span>
            <strong id="stat-done">0</strong>
          </div>
          <div>
            <span class="label">평균점수</span>
            <strong id="stat-avg">0.0</strong>
          </div>
        </div>
        <div class="question-list-wrap">
          <h2>문항 목록</h2>
          <div id="question-list" class="question-list"></div>
        </div>
      </aside>

      <main class="main-area">
        <section class="top-head card">
          <div>
            <h2 id="case-title">Loading...</h2>
            <p id="case-meta" class="meta"></p>
          </div>
          <div class="head-actions">
            <button id="prev-btn" class="ghost-btn">이전</button>
            <button id="next-btn" class="ghost-btn">다음</button>
          </div>
        </section>

        <section class="chart-card card">
          <div class="chart-head">
            <div>
              <strong>차트</strong>
              <span class="chart-sub">정답 공개 전에는 과거 구간만 표시</span>
            </div>
            <span id="reveal-badge" class="pill">미공개</span>
          </div>
          <div class="chart-controls">
            <div id="tf-tabs" class="tf-tabs">
              <button type="button" class="tf-tab active" data-tf="1h">1시간봉</button>
              <button type="button" class="tf-tab" data-tf="15m">15분봉</button>
              <button type="button" class="tf-tab" data-tf="5m">5분봉</button>
            </div>
            <div class="overlay-toggles">
                <label><input id="toggle-ema" type="checkbox" checked /> EMA</label>
                <label><input id="toggle-bb" type="checkbox" checked /> 볼린저밴드</label>
                <label><input id="toggle-structure" type="checkbox" checked /> 구조선/작도</label>
            </div>
          </div>
          <div id="chart" class="chart"></div>
        </section>

        <section class="grid-two">
          <section class="card">
            <h3>문제풀이</h3>
            <form id="answer-form" class="answer-form">
              <div class="field">
                <span class="field-label">1) 방향</span>
                <label><input type="radio" name="direction" value="long" /> 롱</label>
                <label><input type="radio" name="direction" value="short" /> 숏</label>
              </div>

              <div class="field">
                <span class="field-label">2) 예상 강도</span>
                <label><input type="radio" name="move" value="weak" /> 약함 (&lt;0.7%)</label>
                <label><input type="radio" name="move" value="mid" /> 중간 (0.7~1.5%)</label>
                <label><input type="radio" name="move" value="strong" /> 강함 (&gt;=1.5%)</label>
              </div>

              <div class="field">
                <span class="field-label">3) 스탑로스 가격</span>
                <input id="stop-input" type="number" step="0.0001" placeholder="예: 62050" />
              </div>

              <div class="actions">
                <button id="grade-btn" type="button" class="main-btn">채점</button>
                <button id="reveal-btn" type="button" class="ghost-btn">정답 공개</button>
              </div>
            </form>

            <div id="score-box" class="score-box">
              <div class="score-row"><span>방향</span><strong id="score-dir">0</strong></div>
              <div class="score-row"><span>강도</span><strong id="score-move">0</strong></div>
              <div class="score-row"><span>스탑</span><strong id="score-stop">0</strong></div>
              <div class="score-row total"><span>Total</span><strong id="score-total">0 / 100</strong></div>
            </div>
          </section>

          <section class="card">
            <h3>힌트 / 스냅샷</h3>
            <p id="mindset" class="mindset"></p>
            <ul id="hint-list" class="hints"></ul>
            <h4 class="basis-head">판단 근거</h4>
            <ul id="basis-list" class="hints"></ul>
            <div id="snapshot" class="snapshot"></div>
          </section>
        </section>

        <section class="card">
          <h3>정답 & 복기</h3>
          <div id="answer-panel" class="answer-panel">
            <p>채점 후 정답 공개를 누르면 상세 복기가 나옵니다.</p>
          </div>
        </section>

        <section class="footer-note">
          데이터 소스: 선택 백테스트 체결 + 멀티 타임프레임 OHLCV
        </section>
      </main>
    </div>

    <script src="https://unpkg.com/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js"></script>
    <script src="./app.js" defer></script>
  </body>
</html>
